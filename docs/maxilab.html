<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MaxiLab: Exploring Mixed Oscillation Modes &mdash; Asteroseismology Across the HRD  documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Supplementary Materials" href="supplementary.html" />
    <link rel="prev" title="MiniLab 3: Plotting Eigenfunctions" href="minilab-3.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Asteroseismology Across the HRD
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="minilab-1.html">MiniLab 1: First Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="minilab-2.html">MiniLab 2: Plotting Frequencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="minilab-3.html">MiniLab 3: Plotting Eigenfunctions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MaxiLab: Exploring Mixed Oscillation Modes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#finding-the-mixed-mode">Finding the mixed mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mapping-the-instability-strip">Mapping the Instability Strip</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#picking-a-mass">Picking a Mass</a></li>
<li class="toctree-l3"><a class="reference internal" href="#determining-boundaries">Determining Boundaries</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="supplementary.html">Supplementary Materials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Asteroseismology Across the HRD</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>MaxiLab: Exploring Mixed Oscillation Modes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/maxilab.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="maxilab-exploring-mixed-oscillation-modes">
<span id="maxilab"></span><h1>MaxiLab: Exploring Mixed Oscillation Modes<a class="headerlink" href="#maxilab-exploring-mixed-oscillation-modes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>In this maxilab, we will determine when mixed modes are expected to
become observable. Recall that <span class="math notranslate nohighlight">\(\nu_\max\)</span> is the frequency at
maximum oscillation power, and that we have normalized our frequencies
by this frequency. Recall also that only non-radial modes can become
mixed modes. Thus, we want to stop our run when the dipole mode closest to
<span class="math notranslate nohighlight">\(\nu_\max\)</span> becomes mixed, which we can determine by inspecting its value
of <code class="docutils literal notranslate"><span class="pre">md%n_g</span></code> and seeing when it becomes nonzero.</p>
<p>As the very first step, make a copy of your working directory from
<a class="reference internal" href="minilab-3.html#minilab-3"><span class="std std-ref">MiniLab 3</span></a> (with all the changes you have made):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cp -a bellinger-2022-mini-3 bellinger-2022-maxi
<span class="gp">$</span> <span class="nb">cd</span> bellinger-2022-maxi
</pre></div>
</div>
<p>Alternatively, if you were unable to get things working with
<a class="reference internal" href="minilab-3.html#minilab-3"><span class="std std-ref">MiniLab 3</span></a>, then you can grab a working directory
for the MaxiLab from <a class="reference external" href="https://github.com/earlbellinger/mesa-summer-school-2022/raw/main/work-dirs/bellinger-2022-mini-3-solution.tar.gz">here</a>.</p>
</div>
<div class="section" id="finding-the-mixed-mode">
<h2>Finding the mixed mode<a class="headerlink" href="#finding-the-mixed-mode" title="Permalink to this headline">¶</a></h2>
<p>The next step is to add code to determine when the dipole mode
closest to <span class="math notranslate nohighlight">\(\nu_\max\)</span> becomes mixed. Since we have normalized
our frequencies by subtracting <span class="math notranslate nohighlight">\(\nu_\max\)</span>, it will be sufficient
to check when the dipole mode whose frequency is closest to zero
takes on a nonzero value of <span class="math notranslate nohighlight">\(n_g\)</span>.</p>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Add a stopping condition to your run by modifying <code class="docutils literal notranslate"><span class="pre">extras_finish_step</span></code>
that checks when the dipole mode closest to zero takes on a nonzero
value of <span class="math notranslate nohighlight">\(n_g\)</span>.
In order to accomplish this, you will need to store the values of
<span class="math notranslate nohighlight">\(n_g\)</span> in an integer array.
Therefore, you will want to allocate and initialize an array (like
we did previously with the <code class="docutils literal notranslate"><span class="pre">frequencies</span></code> and <code class="docutils literal notranslate"><span class="pre">inertias</span></code> arrays)
and then store the values of <code class="docutils literal notranslate"><span class="pre">md%n_g</span></code> inside the
<code class="docutils literal notranslate"><span class="pre">process_mode</span></code> subroutine.
Then you will want to write a do loop inside <code class="docutils literal notranslate"><span class="pre">extras_finish_step</span></code>
that iterates through the dipole modes and stores the index
of the mode whose normalized frequency closest to zero. Finally,
you will check whether the stored <code class="docutils literal notranslate"><span class="pre">n_g</span></code> value for that mode is nonzero,
and if so, then set <code class="docutils literal notranslate"><span class="pre">extras_finish_step</span> <span class="pre">=</span> <span class="pre">terminate</span></code>.</p>
</div>
</div>
<div class="section" id="mapping-the-instability-strip">
<h2>Mapping the Instability Strip<a class="headerlink" href="#mapping-the-instability-strip" title="Permalink to this headline">¶</a></h2>
<p>As the final part of the MaxiLab, we’re going to use GYRE and MESA to
map out the extent of the “mixed mode” instability strip for
dipole modes. This will involve repeating the evolution for a range of
different stellar masses and metallicities, and noting the effective
temperature and luminosity when the dipole mode closest to
<span class="math notranslate nohighlight">\(\nu_\max\)</span> becomes mixed. To speed things
up, we’ll crowd-source the calculations: each student will focus on a
single stellar mass, and record their results in a shared online
spreadsheet.</p>
<p>If you haven’t had any luck in getting the first part of the MaxiLab
working, then you can grab the solution from <a class="reference external" href="https://github.com/earlbellinger/mesa-summer-school-2022/raw/main/work-dirs/bellinger-2022-maxi-solution.tar.gz">here</a>;
use this as your working directory for the mixed mode
calculations.</p>
<div class="section" id="picking-a-mass">
<h3>Picking a Mass<a class="headerlink" href="#picking-a-mass" title="Permalink to this headline">¶</a></h3>
<p>The first step is for each student to pick a (different) mass and composition.</p>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Visit the Google spreadsheet <a class="reference external" href="https://docs.google.com/spreadsheets/d/1HMFr3RsocZoBkcyLmRLYiyz-xBB33kvZygJtlYrov9w/edit?usp=sharing">here</a>,
and claim a row by
entering your name to the <em>Name</em> column. Make a note of the
mass and metallicity listed in the following columns.</p>
</div>
</div>
<div class="section" id="determining-boundaries">
<h3>Determining Boundaries<a class="headerlink" href="#determining-boundaries" title="Permalink to this headline">¶</a></h3>
<p>The next step is to perform the calculation and record the instability
strip boundaries.</p>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Modify <code class="docutils literal notranslate"><span class="pre">inlist_project</span></code> in your working directory
to set the initial stellar mass to your
assigned value. Then, use the <code class="docutils literal notranslate"><span class="pre">relax_initial_z</span></code> and
<code class="docutils literal notranslate"><span class="pre">relax_initial_y</span></code> parameters in <code class="docutils literal notranslate"><span class="pre">star_job</span></code> (along with <code class="docutils literal notranslate"><span class="pre">new_z</span></code>
and <code class="docutils literal notranslate"><span class="pre">new_y</span></code>) to input your new composition. In order to obtain a value for
Y, we will assume the linear scaling <span class="math notranslate nohighlight">\(Y = 0.2463 + 2 \cdot Z\)</span>.
Make sure to also modify <code class="docutils literal notranslate"><span class="pre">Zbase</span></code> in the <code class="docutils literal notranslate"><span class="pre">&amp;kap</span></code> namelist.</p>
<p>Finally, perform the calculations, and note down the log effective temperature
<span class="math notranslate nohighlight">\(\log T_{\rm eff}/{\rm K}\)</span> and log luminosity <span class="math notranslate nohighlight">\(\log
L/{\rm L_{\odot}}\)</span> at the new stopping point
(you can do this by inspecting the terminal output, or by analyzing
the <code class="docutils literal notranslate"><span class="pre">history.data</span></code> file after the run). <strong>Be
sure to enter logarithmic values, and use 3 decimal places</strong>. Note
that you may wish to turn off the writing of profile files, and
depending on your mass and metallicity, you may need to alter the
pre-existing stopping conditions of the inlist. You may also wish to only
begin computing the oscillations when nearing the end of the main sequence,
for example by adding logic like <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(s%xa(1,s%nz)</span> <span class="pre">&lt;</span> <span class="pre">0.01)</span> <span class="pre">then</span> <span class="pre">...</span></code>.</p>
</div>
<p>A solution can be found <a class="reference external" href="https://github.com/earlbellinger/mesa-summer-school-2022/raw/main/work-dirs/bellinger-2022-maxi-solution.tar.gz">here</a>.</p>
<div class="admonition-optional-exercise admonition">
<p class="admonition-title"><em>Optional</em> Exercise</p>
<p>If you’re feeling bold, see if you can increase the precision with
which the boundaries are determined. One approach is to modify the
<code class="docutils literal notranslate"><span class="pre">extras_check_model</span></code> hook, to retry the step with a reduced
timestep when a transition from <code class="docutils literal notranslate"><span class="pre">n_g</span></code> zero to <code class="docutils literal notranslate"><span class="pre">n_g</span></code> nonzero
is detected.</p>
</div>
<p>When all the data are collected, we’ll combine them to create a map of
the instability strip boundaries in the Hertzsprung-Russell diagram.</p>
<div class="admonition-optional-open-source-development admonition">
<p class="admonition-title"><em>Optional</em> Open-Source Development</p>
<p>Wouldn’t it be great if MESA were able to output some asteroseismic quantities by default in its history and profile files?
Then one could simply add, for example, <code class="docutils literal notranslate"><span class="pre">large_frequency_separation</span></code> to <code class="docutils literal notranslate"><span class="pre">history_columns.list</span></code> and MESA would call GYRE to perform this calculation — without needing to modify <code class="docutils literal notranslate"><span class="pre">run_star_extras.f</span></code>.</p>
<p>Let’s modify MESA’s source code to calculate the some of these quantities, such as the large frequency separation or the period of the fundamental mode.
Then, let’s open a <a class="reference external" href="https://docs.mesastar.org/en/release-r22.05.1/developing/contributing.html#pull-requests">pull request</a> on the <a class="reference external" href="https://github.com/MESAHub/mesa">MESA GitHub</a> to share our modifications with the wider MESA community.</p>
<p>A tutorial for modifying MESA’s source and adding calculations that are then output into the history/profile files can be found <a class="reference external" href="https://docs.mesastar.org/en/release-r22.05.1/developing/common_tasks.html#history-profile-output">here</a>.</p>
<p>This task is intended to be done collaboratively. Communicate on Slack with others who are working on this. Distribute tasks, such as (a) creating the history column outputs, (b) calling GYRE within MESA, (c) handling the GYRE inlist, and (d) creating an appropriate <code class="docutils literal notranslate"><span class="pre">test_suite</span></code> case. Anyone who attempts this task will be credited by name on the pull request.</p>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="minilab-3.html" class="btn btn-neutral float-left" title="MiniLab 3: Plotting Eigenfunctions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="supplementary.html" class="btn btn-neutral float-right" title="Supplementary Materials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Earl Bellinger, Matthias Fabry, Thomas Steindl, Giulia Cinquegrana, May Gade Pedersen, Rich Townsend, Alina Istrate &amp; Anne Thoul.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>